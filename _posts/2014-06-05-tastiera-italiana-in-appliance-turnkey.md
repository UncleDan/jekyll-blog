---
id: 1803
title: Tastiera italiana in appliance Turnkey
date: 2014-06-05T20:00:16+00:00
author: Daniele Lolli (UncleDan)
layout: post
guid: https://www.uncledan.it/?p=1803
permalink: /2014-06-05-tastiera-italiana-in-appliance-turnkey.html
mytory_md_visits_count:
  - "54"
categories:
  - Linux
  - Tech
tags:
  - italian
  - keyboard
  - linux
  - locale
  - turnkey
---
Thanks <span style="color: #272727;"><a href="http://www.turnkeylinux.org/user/40849" target="_blank">avallac_h</a> for the script: I just adapted it to italian (original script was for russian layout).</span>

``# Disable purging italian locales<br />
cat >> /etc/locale.nopurge < <END
it
it_IT
it_IT.UTF-8
END

# Reinstall coreutils (separately, to avoid cyclic dependencies)
apt-get --reinstall install coreutils

# Get a list of packages that lack locale files
# I use `sed` to do the following things:
# 1) remove arch substring: "somepkg:i386" "somepkg:amd64" -> "smth"<br />
# 2) remove commas: "somepkg1, somepkg2" -> "somepkg1 somepkg2"<br />
# 3) remove coreutils from list (cyclic dependencies)<br />
LOCALES=$(dpkg -S /usr/share/locale/ | sed -e 's/:.*$//;s/,//g;s/coreutils//')<br />
I18N=$(dpkg -S /usr/share/i18n/ | sed -e 's/:.*$//;s/,//g;s/coreutils//')</p>
<p>apt-get --reinstall install $LOCALES<br />
apt-get --reinstall install $I18N</p>
<p># (Re-)Install some packages<br />
apt-get --reinstall install \<br />
    console-setup kbd keyboard-configuration \<br />
    locales xkb-data</p>
<p># Correcting "/etc/default/locale" file<br />
echo '#  File generated by update-locale' > /etc/default/locale<br />
echo >> /etc/default/locale < <END

# Reconfigure all that stuff
dpkg-reconfigure locales
dpkg-reconfigure console-setup
dpkg-reconfigure keyboard-configuration``

Source:
  
<a href="http://www.turnkeylinux.org/forum/support/20130222/adding-locales-and-language-support-turnkey-lamp-stack" target="_blank">http://www.turnkeylinux.org/forum/support/20130222/adding-locales-and-language-support-turnkey-lamp-stack</a></code>